{% extends 'bootbase.html' %}
{% load l10n %}
{% block title %}Projectlocatie {{object.name}}{% endblock title %}
{% block brandname %}<a class="navbar-brand" href="{% url 'project-detail' object.project.slug %}">Locatie {{object.name}}</a>{% endblock brandname %}
{% block navbar %}{% endblock %}
{% block admin_url %}projectlocatie/{{object.id}}{% endblock %}
{% block script %}
{{ block.super }}
{% localize off %}
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script>
var map;
function initialize() {
    var pos = new google.maps.LatLng({{object.location.y}},{{object.location.x}});
    map = new google.maps.Map(document.getElementById('map'), {
        zoom: 14,
        center: pos,
        mapTypeId: google.maps.MapTypeId.SATELLITE
    });
    var marker = new google.maps.Marker({map: map, position: pos, title: "Locatie {{object.name}}" });
    var contentString = {{content|safe}};
	var infowindow = new google.maps.InfoWindow({content: contentString});
	google.maps.event.addListener(marker, 'click', function() {
    	infowindow.open(map,marker);
  	});
}
$(function(){initialize();});
</script>
{% endlocalize %}
{% endblock %}
{% block content %}
<div class = "container">
<div class = "row-fluid">
{{object.description|safe}}
</div>
<div id = map style="width:100%;height:400px;"></div>
<div class="row-fluid">
<table class="table table-striped">
<thead>
<tr>
<th>Meetlocatie</th>
<th>Omschrijving</th>
<th>Bestanden</th>
<th>Tijdreeksen</th>
<th>Grafieken</th>
</tr>
</thead>
<tbody>
{% for loc in object.meetlocatie_set.all %}
<tr>
<td><a href='{% url "meetlocatie-detail" object.project.slug object.slug loc.slug %}'>{{loc.name}}</a></td>
<td>{{loc.description|safe}}</td>
<td>{{loc.datafiles.count}}</td>
<td>{{loc.series|length}}</td>
<td>{{loc.charts|length}}</td>
</tr>
{% empty %}
    <div>Geen meetlocaties gevonden</div>
{% endfor %}
</tbody>
</table>
</div>
</div>
{% endblock content %}
